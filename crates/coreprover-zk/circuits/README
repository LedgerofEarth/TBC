# CoreProver ZK Circuits

## Circuits

### ownership.circom

Proves receipt ownership without revealing buyer identity.

**Public Inputs:**
- `receiptId` - The receipt NFT token ID
- `publicKeyHash` - Hash of the buyer's public key

**Private Inputs:**
- `privateKey` - Buyer's private key

**Output:**
- Proof that prover knows the private key for the receipt

## Building

```bash
circom ownership.circom --r1cs --wasm --sym
```

## Generating Proofs

```bash
# Generate witness
node ownership_js/generate_witness.js ownership_js/ownership.wasm input.json witness.wtns

# Generate proof
snarkjs groth16 prove ownership.zkey witness.wtns proof.json public.json
```

## Verifying Proofs

```bash
snarkjs groth16 verify verification_key.json public.json proof.json
```

## Production Notes

This is a simplified circuit for demonstration. In production:

1. Use Poseidon hash instead of the placeholder
1. Add proper constraints for cryptographic operations
1. Implement a complete trusted setup ceremony
1. Add circuit tests with multiple test cases
1. Audit the circuit for soundness and security

```
---

**Note:** This is a `.circom` file (Circom circuit language), not a `.rs` (Rust) file. Circom is the domain-specific language used for writing zero-knowledge circuits that compile to R1CS format for zk-SNARKs.

The circuit is intentionally simplified as a placeholder - a production implementation would need:
- Proper cryptographic hash functions (like Poseidon)
- Complete constraint system
- Security audits
- Trusted setup ceremony​​​​​​​​​​​​​​​​